#!/usr/bin/env bash

clean() {
  say "Cleaning..."
  rm -rf build > /dev/null 2>&1
}

conf() {
  say "Configuring..."
  if ! cmake -B build -S . ; then
    say "Error during configuration"
    exit 1
  fi
}

build() {
  say "Building..."
  if ! cmake --build build --parallel 3; then
    say "Error during building"
    exit 1
  fi
}

# Clear terminal screen and remove old log files
clear
rm -f logs/*.log > /dev/null 2>&1

case "$1" in
  clean)
    clean
    ;;
  conf)
    conf
    ;;
  *)
    [ ! -d "build" ] && conf
    build
    ;;
esac

say "Done"